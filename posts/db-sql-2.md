---
title: 데이터베이스 - [SQL 2]
description: 데이터 삽입, 수정, 삭제, 검색에 관한 구문
publishedDate: "2022-03-11 19:00:00"
tag: CS
---

# SQL 2

## 데이터 삽입, 수정, 삭제

### INSERT

- 테이블에 새로운 레코드를 삽입
- 모든 속성, 또는 부분 속성에 대한 속성값을 삽입

```sql
INSERT INTO 테이블이름
    VALUES($$값_1$$, $값_2$, ...$값_n$)
```

```sql
INSERT INTO 테이블이름(컬럼1,컬럼2...컬럼m)
    VALUES(값1, 값2, ...값m)
```

### UPDATE

- 조건을 만족하는 레코드의 특정 컬럼값을 수정

```sql
UPDATE 테이블이름
    SET 컬럼1=값1, [,컬럼2=값2, ... 컬럼n=값n]
    WHERE 조건
```

```sql
UPDATE 테이블이름
    SET 컬럼1=값1, [,컬럼2=값2, ... 컬럼n=값n]
    WHERE 조건
```

### DELETE

```sql
DELETE FROM 테이블이름
    WHERE 조건 /* WHERE절을 생략하면 모든 레코드를 삭제함 */
```

UPDATE, 혹은 DELETE를 사용할때 주의할 점

구문상으로는 문제가 없으나, 제대로 동작하지 않을때,

조작하려는 해당 레코드의 PK를 참조하는 또다른 테이블이 존재 하지는 않는지 파악해야함 (존재한다면 제대로 동작하지 않음) => 참조 무결성의 제약조건 위반 => 참조되는 대상을 먼저 삭제해야함

### SAFE UPDATES 모드

- WHERE절이 없는 UPDATE/DELETE 문은 테이블의 전체 레코드를 변경/삭제
- 의도하지 않은 데이터 변경/삭제 방지를 위해 MySQL은 SAFE UPDATES모드 지원
- 기본키가 아닌 컬럼을 대상으로 수정/삭제 조건을 명시할 경우 실행 여부를 결정

```sql
SET SQL_SAFE_UPDATES = 0 or 1
```

## 데이터 검색(1)

### SELECT

- 한 개 이상의 테이블에서 주어진 조건을 만족하는 레코드를 출력
- 관계 대수의 셀렉션, 프로젝션, 조인, 카티션 프로덕트의 기능을 모두 포함하는 명령문
- 필수적인 절인 SELECT 절과 부가적인 조건식들을 결합하여사용

```sql
SELECT [DISTICT] 컬럼1, 컬럼2, ..., 컬럼n
    FROM 테이블1 [INNER JOIN | OUTER JOIN
         테이블2, INNER JOIN | OUTER JOIN
         ON 조인조건1
         테이블3
         ..., INNER JOIN | OUTER JOIN
          테이블m]
    [ON 조인 조건식]
    [WHERE 조건식 [중첩질의]]
    [GROUP BY 컬럼1, 컬럼2, ..., 컬럼y
        [HAVING 조건]]
    [ORDER BY 컬럼1[ASC | DESC], ..., 컬럼z[ASC | DESC]]
```

### SELECT문의 각 절의 기능

- SELECT

  - 결과에 포함되는 컬럼을 지정

- FROM

  - 질의를 적용할 테이블을 지정

- ON / WHERE

  - 조인 조건/검색할 레코드 조건을 지정

- GROUP BY

  - 레코드를 그룹화하기 위한 그룹 조건을 지정

- HAVING

  - GROUP BY 절이 적용된 결과에 대한 조건을 지정

- ORDER BY
  - 검색 결과의 정렬 기준을 지정

### 단순질의문의 사용

레코드를 제한하지 않고 전체 테이블을 검색하는 SELECT문으로 WHERE절이 없는 질의문

```sql
SELECT 컬럼1, 컬럼2, ..., 컬럼n
    FROM 테이블
```

```sql
SELECT * /* asterisk => 전체선택 */
    FROM 테이블
```

```sql
SELECT DISTINCT 컬럼 /* DISTNICT => 중복을 제거 */
    FROM 테이블
```

### 조건질의문

- 산술연산식, 함수 등을 사용하여 표현한 조건을 WHERE절에 기술하여 조건을 만족하는 레코드만 검색하는 SELECT문

  - 산술연산자
    - DIV => 정수 나눗셈
  - 비교연산자
  - 논리연산자

- WHERE절은 UPDATE, DELETE 문에서도 동일하게 적용

### 데이터 정렬

- ORDER BY 절 사용
- 검색 결과를 특정 컬럼에 대해 오름차순 또는 내림차순으로 정렬
  - ASC (ascending) 오름차순
  - DESC (descending) 내림차순

### 특수 연산자

- 범위 포함 여부, 부분 일치 여부, 포함 여부 등 관계형 데이터베이스에서만 사용되도록 고안된 연산자

| 종류    | 사용 예                        | 의미                                                        |
| ------- | ------------------------------ | ----------------------------------------------------------- |
| BETWEEN | 컬럼명 BETWEEN $V_1$ AND $V_2$ | 컬럼값이 $V_1$ ~ $V_2$ 사이에 존재하는지 검사               |
| LIKE    | 컬럼명 LIKE '$V_1$%'           | $V_1$으로 시작하는 문자열 검사                              |
| LIKE    | 컬럼명 LIKE '%$V_1$'           | $V_1$으로 끝나는 문자열 검사                                |
| LIKE    | 컬럼명 LIKE '%$V_1$%'          | $V_1$이 문자열 내부에 존재하는지 검사                       |
| LIKE    | 컬럼명 LIKE '$V_{1...}$'       | $V_1$뒤에 한 문자만 일치하는지 검사                         |
| IN      | 컬럼명 IN ($V_1$, ..., $V_n$)  | 컬럼값이 $V_1$, $V_2$, ..., $V_3$ 중 하나와 일치하는지 검사 |

### 함수의 개념

- 사전에 정의된 명령어 집합
- 상용 DBMS는 검색결과가 사용자에게 여러 형태로 사용되도록 여러 데이터 타입에 대한 다양한 함수를 제공 (MySQL 기준)
  - 문자함수
  - 숫자함수
  - 날짜 및 시간함수
